- name: Update Packages
  apt:
    update_cache: true
    upgrade: dist
  register: packages
  delegate_to: "{{ ansible_host }}"
- debug:
    msg: "{{ packages }}"

- name: Ensure snapd
  apt:
    name: snapd
    state: present
    update_cache: true
  register: snapd
  delegate_to: "{{ ansible_host }}"
- debug:
    msg: "{{ snapd }}"

# - name: Ensure snapd service is running
#   service:
#     name: snapd
#     state: started
#     enabled: true
#   delegate_to: "{{ ansible_host }}"

- name: Ensure MicroK8s
  snap: 
    name: 
      - microk8s
    classic: yes
  delegate_to: "{{ ansible_host }}"
